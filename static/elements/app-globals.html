<link rel="import" href="/stat2/elements/polymer/polymer.html"/>
<link rel="import" href="/stat2/elements/core-localstorage/core-localstorage.html"/>

<polymer-element name="app-globals">
    <template>
        <core-localstorage id="loggedstate" name="loggedstate"  on-core-localstorage-load="{{ onStateLoad }}"></core-localstorage>
    </template>
    <script>
        (function(){
            var data = {
                page: '0'
            };

            Polymer({
                ready: function() {
                    this.data = data;
                },
                onStateLoad: function() {
                    if (Boolean(this.$.loggedstate.value)) {
                        this.data.page = this.$.loggedstate.value;
                        this.fire('data-changed', {'fire': this.data.page});
                    }
                }
            });
        })();
    </script>
</polymer-element>
