<link rel="import" href="polymer/polymer.html">
<link rel="import" href="core-icon-button/core-icon-button.html">
<link rel="import" href="paper-checkbox/paper-checkbox.html"/>
<link rel="import" href="paper-input/paper-autogrow-textarea.html"/>

<polymer-element name="todo-item" attributes="data">
    <template>
        <style>
            paper-checkbox {
                margin-right: 15px;
            }
            paper-checkbox /deep/ #checkmark {
                border-color: rgb(179, 229, 252);
            }
            paper-checkbox[checked] /deep/ #checkmark {
                border-color: #ffffff;
            }
            paper-autogrow-textarea textarea {
                background-color: rgb(179, 229, 252);
                line-height: 1.4;
                font-family: 'Roboto', sans-serif;
            }
            paper-autogrow-textarea textarea::-webkit-scrollbar {
                display: none;
            }
        </style>
        <div layout horizontal center>
            <paper-checkbox checked="{{ data.done }}" on-change="{{ updateItem }}"></paper-checkbox>
            <paper-autogrow-textarea id="textarea" rows="1" maxRows="4" flex>
                <textarea id="title" value="{{ data.title }}" flex on-change="{{ onTitleChange }}" on-blur="{{ updateItem }}"></textarea>
            </paper-autogrow-textarea>
            <core-icon-button icon="delete" on-tap="{{ deleteItem }}"></core-icon-button>
        </div>
    </template>
    <script>
        Polymer({
            created: function() {
                this.data = {};
            },
            onTitleChange: function() {
                this.$.textarea.update();
            },
            updateItem: function() {
                this.fire('update-todo-item');
            },
            deleteItem: function(e, detail, sender) {
                this.fire('delete-todo-item');
            }
        });
    </script>
</polymer-element>